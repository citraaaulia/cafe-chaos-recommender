{% extends 'layout.html' %}
{% block content %}

<style>
  /* Override spesifik untuk halaman ini saja */
  .change-pass-box {
    background: rgba(255,255,255,0.10); /* white 10% */
    border: 1px solid rgba(255,255,255,1); /* white 100% */
  }
  .change-pass-box .btn-login {
    background: #C7CFB7;   /* warna tombol baru */
    color: #0E140C;        /* teks tombol kontras gelap */
    border: none;
  }
  .change-pass-box .btn-login:hover { filter: brightness(0.95); }
</style>

<div class="content">
  <form class="login-box change-pass-box" method="post" action="{{ url_for('admin.change_password') }}">
    <h2>Ganti Password</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="error-msg">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="login-data">
      <label class="unamepass">Password Saat Ini</label>
      <div class="pass-input">
        <input type="password" id="current_password" name="current_password" placeholder="Masukkan Password Saat Ini" required>
        <button type="button" class="toggle-password" data-target="current_password">
          <img src="{{ url_for('static', filename='icons/show.svg') }}" alt="Tampilkan" width="20">
        </button>
      </div>
    </div>

    <div class="login-data">
      <label class="unamepass">Password Baru</label>
      <div class="pass-input">
        <input type="password" id="new_password" name="new_password" placeholder="Masukkan Password Baru" required>
        <button type="button" class="toggle-password" data-target="new_password">
          <img src="{{ url_for('static', filename='icons/show.svg') }}" alt="Tampilkan" width="20">
        </button>
      </div>
    </div>

    <div class="login-data">
      <label class="unamepass">Konfirmasi Password Baru</label>
      <div class="pass-input">
        <input type="password" id="confirm_password" name="confirm_password" placeholder="Konfirmasi Password Baru" required>
        <button type="button" class="toggle-password" data-target="confirm_password">
          <img src="{{ url_for('static', filename='icons/show.svg') }}" alt="Tampilkan" width="20">
        </button>
      </div>
    </div>

    <button type="submit" class="btn-login">Ganti Password</button>
  </form>
</div>

<script>
  document.querySelectorAll('.toggle-password').forEach(function(btn){
    btn.addEventListener('click', function(){
      var targetId = btn.getAttribute('data-target');
      var input = document.getElementById(targetId);
      var icon  = btn.querySelector('img');
      if (!input) return;
      if (input.type === 'password') {
        input.type = 'text';
        icon.alt = 'Sembunyikan';
        try { icon.src = "{{ url_for('static', filename='icons/hide.svg') }}"; } catch(e){}
      } else {
        input.type = 'password';
        icon.alt = 'Tampilkan';
        try { icon.src = "{{ url_for('static', filename='icons/show.svg') }}"; } catch(e){}
      }
    });
  });
</script>

{% endblock %}
